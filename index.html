<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Josué Álvarez Moreno's blog</title>
	
	<meta name="author" content="Josué Álvarez Moreno">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/j-alvarez-moreno">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:blog@josuealvarezmoreno.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="https://linkedin.com/in/josué-álvarez-moreno-b88896144">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
			
			<a type="button" class="navbar-toggle nav-link"  data-toggle="collapse" data-target="#language-picker">
				<i class="fa fa-globe"></i>
				<span class="sr-only">Language selection.</span>
			</a>
			<a class="navbar-brand" href="/">
				<img src="//www.gravatar.com/avatar/da3470a132e93bfe23072dccad7e2956?s=35" class="img-circle" />
				
			</a>
		</div>
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
		<div class="collapse navbar-collapse" id="language-picker">
			<ul class="nav navbar-nav">
				
					<li><a 
							style="font-size: 16px; color: grey"
						 href=" /es/ ">Español</a></li>
	  			
					<li><a 
							style="font-weight: bold; font-size: 20px; color: #ffcb6a"
						 href=" / ">English</a></li>
	  			
			</ul>
		</div>
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="//www.gravatar.com/avatar/da3470a132e93bfe23072dccad7e2956?s=150" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/j-alvarez-moreno">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:blog@josuealvarezmoreno.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/in/josué-álvarez-moreno-b88896144">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
	</ul>
	<br><br><br><br>
	<div id="language-switcher">
  		
			<a 
					style="font-size: 16px; color: white"
				 href=" /es/ ">Español</a>
			 | 
  		
			<a 
					style="font-weight: bold; font-size: 20px; color: #ffcb6a"
				 href=" / ">English</a>
			
  		
  	</div>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Josué Álvarez Moreno's blog </h1>
</div>


	
		
		<article class="home">
		  <span class="post-date">
		    
		    August
		    18th,
		    
		    2017
		  </span>

		  <h2>
		    <a href="/nagios/2017/08/18/Nagios.html">Monitoring our infrastructure with Nagios.</a>
		  </h2>

		  <div>
		    
		    	
		    		
  					<p>In this post we will learn how to monitor computers and services with Nagios. This will allow us to receive timely and actionable alerts about issues in our infrastructure.</p>

<ul id="markdown-toc">
  <li><a href="/nagios/2017/08/18/Nagios.html#what-is-nagios" id="markdown-toc-what-is-nagios">What is Nagios.</a></li>
  <li><a href="/nagios/2017/08/18/Nagios.html#nagios-how-it-works" id="markdown-toc-nagios-how-it-works">Nagios: How it works.</a>    <ul>
      <li><a href="/nagios/2017/08/18/Nagios.html#monitored-service-states-and-transition-flow-between-states" id="markdown-toc-monitored-service-states-and-transition-flow-between-states">Monitored service states, and transition flow between states.</a>        <ul>
          <li><a href="/nagios/2017/08/18/Nagios.html#a-resource-is-flapping-what-does-flapping-mean" id="markdown-toc-a-resource-is-flapping-what-does-flapping-mean">A resource is “flapping”. What does “flapping” mean?</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="/nagios/2017/08/18/Nagios.html#description-of-the-scenario-we-are-working-with-in-this-post" id="markdown-toc-description-of-the-scenario-we-are-working-with-in-this-post">Description of the scenario we are working with in this post.</a></li>
  <li><a href="/nagios/2017/08/18/Nagios.html#installing-nagios" id="markdown-toc-installing-nagios">Installing Nagios.</a></li>
  <li><a href="/nagios/2017/08/18/Nagios.html#monitoring-services-and-computers" id="markdown-toc-monitoring-services-and-computers">Monitoring services and computers.</a>    <ul>
      <li><a href="/nagios/2017/08/18/Nagios.html#installing-the-monitoring-agent" id="markdown-toc-installing-the-monitoring-agent">Installing the monitoring agent.</a></li>
      <li><a href="/nagios/2017/08/18/Nagios.html#adding-devices-to-the-monitoring-list" id="markdown-toc-adding-devices-to-the-monitoring-list">Adding devices to the monitoring list</a></li>
      <li><a href="/nagios/2017/08/18/Nagios.html#defining-services-to-monitor" id="markdown-toc-defining-services-to-monitor">Defining services to monitor</a></li>
      <li><a href="/nagios/2017/08/18/Nagios.html#adding-custom-service-checks" id="markdown-toc-adding-custom-service-checks">Adding custom service checks.</a>        <ul>
          <li><a href="/nagios/2017/08/18/Nagios.html#checking-for-zombie-processes" id="markdown-toc-checking-for-zombie-processes">Checking for zombie processes.</a>            <ul>
              <li><a href="/nagios/2017/08/18/Nagios.html#nagios-server" id="markdown-toc-nagios-server">Nagios server</a></li>
              <li><a href="/nagios/2017/08/18/Nagios.html#monitored-device" id="markdown-toc-monitored-device">Monitored device.</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="/nagios/2017/08/18/Nagios.html#installing-additional-plugins-to-monitor-other-services" id="markdown-toc-installing-additional-plugins-to-monitor-other-services">Installing additional plugins to monitor other services.</a>        <ul>
          <li><a href="/nagios/2017/08/18/Nagios.html#installing-nagios-plugin-mongodb" id="markdown-toc-installing-nagios-plugin-mongodb">Installing nagios-plugin-mongodb</a></li>
        </ul>
      </li>
      <li><a href="/nagios/2017/08/18/Nagios.html#setting-up-email-notifications" id="markdown-toc-setting-up-email-notifications">Setting up email notifications</a>        <ul>
          <li><a href="/nagios/2017/08/18/Nagios.html#customizing-the-email-contents-and-the-sending-methods" id="markdown-toc-customizing-the-email-contents-and-the-sending-methods">Customizing the email contents and the sending methods.</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="/nagios/2017/08/18/Nagios.html#at-a-glance-overview-of-our-devices-and-services" id="markdown-toc-at-a-glance-overview-of-our-devices-and-services">At-a-glance overview of our devices and services.</a></li>
  <li><a href="/nagios/2017/08/18/Nagios.html#testing-notifications" id="markdown-toc-testing-notifications">Testing notifications.</a>    <ul>
      <li><a href="/nagios/2017/08/18/Nagios.html#device-offline" id="markdown-toc-device-offline">Device offline.</a></li>
      <li><a href="/nagios/2017/08/18/Nagios.html#zombie-process" id="markdown-toc-zombie-process">Zombie process.</a></li>
      <li><a href="/nagios/2017/08/18/Nagios.html#mongodb-server-availability" id="markdown-toc-mongodb-server-availability">MongoDB server availability.</a></li>
    </ul>
  </li>
  <li><a href="/nagios/2017/08/18/Nagios.html#closing-thoughts" id="markdown-toc-closing-thoughts">Closing thoughts.</a></li>
</ul>

<h1 id="what-is-nagios">What is Nagios.</h1>
<p>Nagios is an application that monitors computers, services, networks and infrastructure. It sends alerts in case of trouble, and it sends notifications when the issue is resolved.</p>

<p>Unlike other commercial alternatives like SolarWinds, Nagios is both free and Open Source and <a href="https://support.nagios.com/support-plans/">it also offers the option of purchasing a support plan</a>.</p>

<h1 id="nagios-how-it-works">Nagios: How it works.</h1>

<p>Nagios can obtain information about the monitored resources in two different ways:</p>

<ul>
  <li>
    <p>Using the Nagios Agent: After deploying the Agent to the computers you want to monitor, these agents collect the information and perform the checks by themselves before sending them to the Nagios server.
  -The main advantage of this method is the flexbility it offers, since we can define custom checks and write code to monitor any resource we can think of. The disadvantage would be that we have to push the definition of these custom checks to the clients.</p>
  </li>
  <li>
    <p><em>Agentless</em> : The Nagios server uses the facilities provided by the device that is being monitored (for example, VMI or SNMP).</p>
    <ul>
      <li>The main advantage of this mode is that it reduces the complexity of our deployment, and it allows us to centralize all the configuration in the Nagios server. The disadvantage would be that it does not allow for custom checks, so if the device does not provide a facility for monitoring a resource we can’t monitor it this way.</li>
    </ul>
  </li>
</ul>

<p>Nagios is able to use both modes at the same time, combining the results from agent checks and from agentless checks.

			    <ul class="pager"> 
					<li class="next">
			    		<a style=color:#f55c4f href="/nagios/2017/08/18/Nagios.html">View full post.</a>
	  				</li>
				</ul>
			    
		    
		  </div>
		<div class="separator"></div>
		</article>
		
	

	
		
		<article class="home">
		  <span class="post-date">
		    
		    August
		    11th,
		    
		    2017
		  </span>

		  <h2>
		    <a href="/terraform/2017/08/11/Terraform-101.html">Terraform 101</a>
		  </h2>

		  <div>
		    
		    	
		    		
  					<p>In this post we’ll explore a tool called Terraform, its advantages and disadvantages; and we’ll use it to spin up a test instance on Amazon AWS.</p>

<ul id="markdown-toc">
  <li><a href="/terraform/2017/08/11/Terraform-101.html#terraform-what-is-it" id="markdown-toc-terraform-what-is-it">Terraform: What is it?</a></li>
  <li><a href="/terraform/2017/08/11/Terraform-101.html#advantages-and-disadvantages-of-using-terraform" id="markdown-toc-advantages-and-disadvantages-of-using-terraform">Advantages and disadvantages of using Terraform.</a>    <ul>
      <li><a href="/terraform/2017/08/11/Terraform-101.html#pros" id="markdown-toc-pros">Pros</a></li>
    </ul>
  </li>
  <li><a href="/terraform/2017/08/11/Terraform-101.html#command-overview" id="markdown-toc-command-overview">Command overview.</a></li>
  <li><a href="/terraform/2017/08/11/Terraform-101.html#installing-terraform" id="markdown-toc-installing-terraform">Installing Terraform</a></li>
  <li><a href="/terraform/2017/08/11/Terraform-101.html#first-steps-creating-an-instance-on-amazon-aws" id="markdown-toc-first-steps-creating-an-instance-on-amazon-aws">First steps: Creating an instance on Amazon AWS.</a></li>
  <li><a href="/terraform/2017/08/11/Terraform-101.html#basic-provisioning-of-instances" id="markdown-toc-basic-provisioning-of-instances">Basic provisioning of instances.</a></li>
</ul>

<h1 id="terraform-what-is-it">Terraform: What is it?</h1>

<p>Developed by Hashicorp, creators of Vagrant and Packer, Terraform is a tool that enables us to define our infrastructure as code (formally known as <a href="https://en.wikipedia.org/wiki/Infrastructure_as_Code">IaC</a>). We can add or modify resources such as computing instances, ssh-keys, network topology or firewall rules and Terraform takes care of generating and performing the necessary operations so the infrastructure provider’s state matches the one described in the code.</p>

<p>Terraform supports a wide range of on-site and cloud infrastructure such as Amazon AWS, Microsoft Azure, Openstack, VMware vSphere and Digital Ocean. A full list of supported providers <a href="https://www.terraform.io/docs/providers/index.html">is located on the tool’s website</a>.</p>

<h1 id="advantages-and-disadvantages-of-using-terraform">Advantages and disadvantages of using Terraform.</h1>

<h2 id="pros">Pros</h2>

<ul>
  <li><strong>Infrastructure as code (IaC)</strong>: This enables us to treat our infrastructure as a file. In plain English this means the following: we can back it up, keep a history of our hardware and configuration (including the associated firewall rules, VLANs and security policies) and rollback changes quickly and efficiently. Our datacenter is <em>stored on a file</em>, thus we can re-deploy our entire infrastructure in a few keystrokes. We are now able to set-up a testing or development environment that is guaranteed to be an exact replica of the actual production environment, or quickly spin-up a second datacenter in a disaster recovery scenario.</li>
  <li><strong>Speed</strong>: Terraform is fast, very fast. If the infrastructure provider supports it, Terraform parallelizes the generation and modification of resources. The result is: it takes literally a minute to provision one instance, <em>and it takes the exact same time to provision 20 of them</em>.</li>
  <li><strong>Supports multiple providers</strong>: Unlike Heat or CloudFormation, Terraform supports a variety of providers and can mix and match resources from any of them simultaneously. For example: We could keep the database in our local datacenter to comply with PII regulations, while hosting the frontend of the application somewhere else.</li>
  <li>
    <p><strong>Flexibility</strong>: Our infrastructure is declared in <em>.tf</em> files. Terraform consumes all the .tf files from the folder and processes them to create the execution plan. We can separate the resources in a logical way, and easily add/substract a file with new resources for testing purposes.

			    <ul class="pager"> 
					<li class="next">
			    		<a style=color:#f55c4f href="/terraform/2017/08/11/Terraform-101.html">View full post.</a>
	  				</li>
				</ul>
			    
		    
		  </div>
		<div class="separator"></div>
		</article>
		
	

	
		
		<article class="home">
		  <span class="post-date">
		    
		    August
		    1st,
		    
		    2017
		  </span>

		  <h2>
		    <a href="/placeholder/2017/08/01/hello-world.html">Hello World!</a>
		  </h2>

		  <div>
		    
		    	<p>Welcome to my blog. Here I will publish technical posts and general thoughts about technology, with the hope that it can be useful for you.</p>

<p>My native language is Spanish, but the translation efforts are underway. If you can understand the language, the Spanish section of the blog has more content at the moment.</p>

<p>In the meantime, you could visit my <a href="https://github.com/j-alvarez-moreno">GitHub</a> and check out my repositories. One of them <a href="https://github.com/j-alvarez-moreno/proyecto-2ASIR">is a case study on automatically and horizontally scaling a webserver to the cloud</a> with Terraform, and it aims to solve the problem of a sudden and unexpected massive spike in web traffic that one has to be prepared to survive without offering a degraded experience to the end user.</p>


		    
		  </div>
		<div class="separator"></div>
		</article>
		
	

<hr/>

<ul class="pager"> 

  
  <li class="previous disabled">
    <a>&larr; Newer</a>
  </li>
  
  
  <li>
    <span class="page_number">Page: 1 of 1</span>
  </li>

  
  <li class="next disabled">
    <a>Older &rarr;</a>        
  </li>
  

</ul>



	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-104442288-1', 'auto');
  ga('send', 'pageview');
</script>

